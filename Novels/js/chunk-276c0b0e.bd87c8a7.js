(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-276c0b0e"],{1148:function(t,a,i){"use strict";var e=i("a691"),o=i("1d80");t.exports="".repeat||function(t){var a=String(o(this)),i="",s=e(t);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(a+=a))1&s&&(i+=a);return i}},"408a":function(t,a,i){var e=i("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=e(t))throw TypeError("Incorrect invocation");return+t}},"65f0":function(t,a,i){var e=i("861d"),o=i("e8b5"),s=i("b622"),r=s("species");t.exports=function(t,a){var i;return o(t)&&(i=t.constructor,"function"!=typeof i||i!==Array&&!o(i.prototype)?e(i)&&(i=i[r],null===i&&(i=void 0)):i=void 0),new(void 0===i?Array:i)(0===a?0:a)}},"7db0":function(t,a,i){"use strict";var e=i("23e7"),o=i("b727").find,s=i("44d2"),r=i("ae40"),n="find",l=!0,c=r(n);n in[]&&Array(1)[n]((function(){l=!1})),e({target:"Array",proto:!0,forced:l||!c},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),s(n)},"857a4":function(t,a,i){var e=i("1d80"),o=/"/g;t.exports=function(t,a,i,s){var r=String(e(t)),n="<"+a;return""!==i&&(n+=" "+i+'="'+String(s).replace(o,"&quot;")+'"'),n+">"+r+"</"+a+">"}},9911:function(t,a,i){"use strict";var e=i("23e7"),o=i("857a4"),s=i("af03");e({target:"String",proto:!0,forced:s("link")},{link:function(t){return o(this,"a","href",t)}})},"9cbb":function(t,a,i){},af03:function(t,a,i){var e=i("d039");t.exports=function(t){return e((function(){var a=""[t]('"');return a!==a.toLowerCase()||a.split('"').length>3}))}},b680:function(t,a,i){"use strict";var e=i("23e7"),o=i("a691"),s=i("408a"),r=i("1148"),n=i("d039"),l=1..toFixed,c=Math.floor,d=function(t,a,i){return 0===a?i:a%2===1?d(t,a-1,i*t):d(t*t,a/2,i)},u=function(t){var a=0,i=t;while(i>=4096)a+=12,i/=4096;while(i>=2)a+=1,i/=2;return a},f=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n((function(){l.call({})}));e({target:"Number",proto:!0,forced:f},{toFixed:function(t){var a,i,e,n,l=s(this),f=o(t),v=[0,0,0,0,0,0],h="",k="0",g=function(t,a){var i=-1,e=a;while(++i<6)e+=t*v[i],v[i]=e%1e7,e=c(e/1e7)},m=function(t){var a=6,i=0;while(--a>=0)i+=v[a],v[a]=c(i/t),i=i%t*1e7},b=function(){var t=6,a="";while(--t>=0)if(""!==a||0===t||0!==v[t]){var i=String(v[t]);a=""===a?i:a+r.call("0",7-i.length)+i}return a};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(h="-",l=-l),l>1e-21)if(a=u(l*d(2,69,1))-69,i=a<0?l*d(2,-a,1):l/d(2,a,1),i*=4503599627370496,a=52-a,a>0){g(0,i),e=f;while(e>=7)g(1e7,0),e-=7;g(d(10,e,1),0),e=a-1;while(e>=23)m(1<<23),e-=23;m(1<<e),g(1,1),m(2),k=b()}else g(0,i),g(1<<-a,0),k=b()+r.call("0",f);return f>0?(n=k.length,k=h+(n<=f?"0."+r.call("0",f-n)+k:k.slice(0,n-f)+"."+k.slice(n-f))):k=h+k,k}})},b727:function(t,a,i){var e=i("0366"),o=i("44ad"),s=i("7b0b"),r=i("50c4"),n=i("65f0"),l=[].push,c=function(t){var a=1==t,i=2==t,c=3==t,d=4==t,u=6==t,f=5==t||u;return function(v,h,k,g){for(var m,b,p=s(v),C=o(p),w=e(h,k,3),_=r(C.length),D=0,B=g||n,x=a?B(v,_):i?B(v,0):void 0;_>D;D++)if((f||D in C)&&(m=C[D],b=w(m,D,p),t))if(a)x[D]=b;else if(b)switch(t){case 3:return!0;case 5:return m;case 6:return D;case 2:l.call(x,m)}else if(d)return!1;return u?-1:c||d?d:x}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},c84b:function(t,a,i){"use strict";i.r(a);var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"detail"},[i("van-nav-bar",{staticClass:"van-head",attrs:{title:"书籍详情","left-arrow":""},on:{"click-left":t.back}}),i("div",{staticClass:"detail-book"},[i("div",{staticClass:"clearfix"},[i("div",{staticClass:"detail-book-img fl"},[i("img",{staticClass:"auto-img",attrs:{src:t.detailBookData.cover,alt:""}})]),i("div",{staticClass:"detail-book-item fr"},[i("div",{staticClass:"detail-book-title"},[t._v(t._s(t.detailBookData.title))]),i("div",{staticClass:"detail-book-bookmask clearfix"},[i("div",{staticClass:"fl detail-book-moods"},[t._v(t._s(t.detailBookData.author))]),i("div",{staticClass:"fl detail-book-center"},[t._v("|")]),i("div",{staticClass:"fl"},[t._v(t._s(t.detailBookData.majorCate))]),i("div",{staticClass:"fl detail-book-center"},[t._v("|")]),i("div",{staticClass:"fl"},[t._v(t._s(t.detailBookData.chaptersCount)+"万字")])]),i("div",{staticClass:"detail-book-bookmask"},[t._v(t._s(t.detailBookData.updated)+"更新")])])]),i("div",{staticClass:"clearfix read-book"},[i("div",{staticClass:"fl detail-book-join read-join",class:{"addbook-dt":t.isAtBook},on:{click:t.addBookshelf}},[t._v("加入书架")]),i("div",{staticClass:"fr detail-book-read read-join",class:{"reading-dt":t.readSwitch},on:{click:function(a){return t.readingNow(t.catalogueLink,t.detailBookData._id)}}},[t._v(t._s(t.readSwitch?"继续阅读":"开始阅读"))])]),i("div",{staticClass:"detail-free"},[t._v("开通VIP，免费阅读此书")])]),i("div",{staticClass:"clearfix detail-item"},[i("div",{staticClass:"fl detail-item-box"},[i("div",{staticClass:"detail-item-title"},[t._v("总人气")]),i("div",{staticClass:"detail-item-number"},[t._v(t._s(t.detailBookData.totalFollower)+"万")])]),i("div",{staticClass:"fl detail-item-box"},[i("div",{staticClass:"detail-item-title"},[t._v("读者留存")]),i("div",{staticClass:"detail-item-number"},[t._v(t._s(t.detailBookData.retentionRatio)+"%")])]),i("div",{staticClass:"fl detail-item-box"},[i("div",{staticClass:"detail-item-title"},[t._v("总评分")]),i("div",{staticClass:"detail-item-number"},[t._v(t._s(t.detailBookData.starRatingCount))])])]),i("div",{class:t.isActive?"detail-content-txt":"detail-content-title"},[t._v(" "+t._s(t.detailBookData.longIntro)+" "),i("div",{staticClass:"detail-content-icon",on:{click:t.swich}},[i("van-icon",{attrs:{name:t.isActive?"arrow-down":"arrow-up",size:"18"}})],1)]),i("div",{staticClass:"detail-catalog clearfix",on:{click:function(a){return t.skipLink(t.detailBookData._id)}}},[i("div",{staticClass:"fl"},[t._v("目录")]),i("div",{staticClass:"fr detail-catalog-title clearfix"},[i("div",{staticClass:"fl"},[t._v(t._s(t.detailBookData.lastChapter))]),i("div",{staticClass:"fl icons"},[i("van-icon",{attrs:{name:"arrow",size:"14"}})],1)])]),i("div",{staticClass:"detail-comment"},[i("div",{staticClass:"detail-comment-topic"},[t._v("热门书评")]),t._l(t.bookReviewData,(function(a,e){return i("div",{key:e,staticClass:"observer clearfix"},[t._m(0,!0),i("div",{staticClass:"fr detail-critic"},[i("div",{staticClass:"detail-comment-nickname"},[t._v(t._s(a.author.nickname))]),i("div",{staticClass:"detail-comment-content"},[t._v(t._s(a.content))]),i("div",{staticClass:"detail-comment-time"},[t._v(t._s(a.updated))])])])}))],2)],1)},o=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"fl detail-comment-img"},[e("img",{staticClass:"auto-img border-img",attrs:{src:i("f9a7"),alt:""}})])}],s=(i("7db0"),i("d81d"),i("fb6a"),i("b680"),i("9911"),i("9cbb"),{data:function(){return{isActive:!0,detailBookData:{},bookReviewData:[],booksId:"",readSwitch:!1,isAtBook:!1,catalogueLink:"",catalogueData:[],historyData:[],urls:""}},created:function(){this.isActive=!0,this.getDetailBookData(),this.getIsAtBook(),this.getCatalogue(),this.getBookReview(),this.getReadSwitch()},methods:{back:function(){this.$router.go(-1)},togglerTarBar:function(t){this.$router.push(t)},swich:function(){this.isActive=!this.isActive},getDetailBookData:function(){var t=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"http://novel.kele8.cn/book-info/"+this.$route.query.id}).then((function(a){t.$toast.clear(),a.data&&(t.detailBookData=a.data),t.detailBookData.updated=t.detailBookData.updated.substr(0,10),t.detailBookData.cover=unescape(a.data.cover).slice(7),t.detailBookData.totalFollower=(t.detailBookData.totalFollower/1e4).toFixed(2),t.detailBookData.starRatingCount=(t.detailBookData.totalFollower/100).toFixed(2)})).catch((function(a){t.$toast.clear()}))},getBookReview:function(){var t=this;this.axios({method:"GET",url:"http://novel.kele8.cn/book/short-reviews?book="+this.$route.query.id}).then((function(a){a.data.docs&&(t.bookReviewData=a.data.docs.slice(0,3));for(var i=0;i<t.bookReviewData.length;i++)t.bookReviewData[i].updated=t.bookReviewData[i].updated.substr(0,10)})).catch((function(t){}))},skipLink:function(t){this.$router.push({name:"Catalogue",query:{id:t}})},addBookshelf:function(){var t=this;if(localStorage.getItem("BSID")){var a=JSON.parse(localStorage.getItem("BSID")),i=a.find((function(a){return t.detailBookData._id==a&&(t.$toast("书架已存在此书籍"),!0)}));i||(this.isAtBook=!0,this.$toast("已加入书架"),a.unshift(this.detailBookData._id)),localStorage.setItem("BSID",JSON.stringify(a))}else{var e=[this.detailBookData._id];localStorage.setItem("BSID",JSON.stringify(e))}},getIsAtBook:function(){var t=this.$route.query.id,a=JSON.parse(localStorage.getItem("BSID"));if(a){var i=a.find((function(a){return t==a}));this.isAtBook=i}else this.isAtBook=!1},getCatalogue:function(){var t=this;this.axios({method:"GET",url:"http://novel.kele8.cn/book-sources?view=summary&book="+this.$route.query.id}).then((function(a){200==a.status&&(t.urls=a.data[0]._id),t.axios({method:"GET",url:"http://novel.kele8.cn/book-chapters/"+t.urls}).then((function(a){200==a.status&&(t.CatalogueData=a.data.chapters,t.catalogueLink=t.CatalogueData[0].link,t.$store.dispatch("setReadNow",a.data.chapters))})).catch((function(t){}))})).catch((function(t){}))},readingNow:function(t,a){var i=this,e=!0;0!=this.historyData.length&&this.historyData.map((function(t){if(t.bookId==a)return e=!1,void i.$router.push({name:"Readnow",query:{url:t.chapterId,id:a,index:t.index}})})),e&&this.$router.push({name:"Readnow",query:{url:t,id:a,index:0}})},getReadSwitch:function(){var t=this;this.historyData=this.$store.state.readHistory;var a=this.$route.query.id;this.historyData.map((function(i){i.bookId!=a||(t.readSwitch=i.switch)}))}}}),r=s,n=i("2877"),l=Object(n["a"])(r,e,o,!1,null,null,null);a["default"]=l.exports},d81d:function(t,a,i){"use strict";var e=i("23e7"),o=i("b727").map,s=i("1dde"),r=i("ae40"),n=s("map"),l=r("map");e({target:"Array",proto:!0,forced:!n||!l},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},f9a7:function(t,a,i){t.exports=i.p+"img/chichigua.eb6ce078.jpg"}}]);
//# sourceMappingURL=chunk-276c0b0e.bd87c8a7.js.map